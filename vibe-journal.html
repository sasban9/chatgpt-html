<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Journal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin-bottom: 20px;
        }
        .entry {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            width: 90%;
            max-width: 400px;
        }
        .modal textarea {
            width: 100%;
            height: 100px;
            margin-bottom: 10px;
        }
        .modal input[type="date"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        .close-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            float: right;
        }
    </style>
    <style>
        body {
            background-color: #121212;
            color: #FFFFFF;
        }
        button {
            background-color: #1DB954;
            color: #FFFFFF;
            border: none;
            border-radius: 50px;
            cursor: pointer;
        }
        button:hover {
            background-color: #1ED760;
        }
        .entry {
            background-color: #282828;
            border: 1px solid #333333;
            color: #FFFFFF;
        }
        .modal-content {
            background-color: #181818;
            color: #FFFFFF;
        }
        .modal input[type="date"] {
            background-color: #282828;
            color: #FFFFFF;
            border: 1px solid #333333;
        }
        .modal input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }
        .close-btn {
            background-color: #E22134;
        }
        .close-btn:hover {
            background-color: #FF4C4C;
        }
    </style>
</head>
<body>
    <h1>Vibe Journal</h1>
    <button onclick="openModal()">Add New Entry</button>
    <h2>Previous Entries</h2>
    <div id="entries"></div>
    <button onclick="expandAll()">Expand All</button>
    <button onclick="collapseAll()">Collapse All</button>
    <div id="calendar"></div>
    <script>
        function generateCalendar() {
            const calendarContainer = document.getElementById('calendar');
            calendarContainer.innerHTML = '';

            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            const entryDates = entries.map(entry => new Date(entry.date).toDateString());

            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            const currentMonth = currentDate.getMonth();

            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            const calendarTable = document.createElement('table');
            calendarTable.className = 'calendar';

            const headerRow = document.createElement('tr');
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                const th = document.createElement('th');
                th.textContent = day;
                headerRow.appendChild(th);
            });
            calendarTable.appendChild(headerRow);

            let date = 1;
            for (let i = 0; i < 6; i++) {
                const row = document.createElement('tr');

                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement('td');
                    if (i === 0 && j < firstDay) {
                        cell.textContent = '';
                    } else if (date > daysInMonth) {
                        break;
                    } else {
                        const cellDate = new Date(currentYear, currentMonth, date).toDateString();
                        cell.textContent = date;
                        if (entryDates.includes(cellDate)) {
                            cell.style.backgroundColor = '#1DB954';
                            cell.style.color = '#FFFFFF';
                            cell.style.borderRadius = '50%';
                        }
                        date++;
                    }
                    row.appendChild(cell);
                }
                calendarTable.appendChild(row);
            }

            calendarContainer.appendChild(calendarTable);
        }

        // Generate calendar on page load
        generateCalendar();
    </script>
    <script>
        function groupEntriesByMonth(entries) {
            return entries.reduce((groups, entry) => {
                const month = new Date(entry.date).toLocaleString('default', { month: 'long', year: 'numeric' });
                if (!groups[month]) {
                    groups[month] = [];
                }
                groups[month].push(entry);
                return groups;
            }, {});
        }

        function displayEntries() {
            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            const groupedEntries = groupEntriesByMonth(entries);
            const entriesContainer = document.getElementById('entries');
            entriesContainer.innerHTML = '';

            Object.keys(groupedEntries)
                .sort((a, b) => new Date(b) - new Date(a)) // Reverse chronological order
                .forEach(month => {
                    const monthDiv = document.createElement('div');
                    monthDiv.className = 'month-group';

                    const monthHeader = document.createElement('button');
                    monthHeader.className = 'accordion';
                    monthHeader.textContent = month;
                    monthHeader.onclick = function () {
                        const panel = this.nextElementSibling;
                        panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
                    };

                    const monthPanel = document.createElement('div');
                    monthPanel.className = 'panel';
                    monthPanel.style.display = 'none';

                    groupedEntries[month].forEach(entry => {
                        const entryDiv = document.createElement('div');
                        entryDiv.className = 'entry';
                        entryDiv.innerHTML = `<strong>${entry.date}</strong><p>${entry.text}</p>`;
                        monthPanel.appendChild(entryDiv);
                    });

                    monthDiv.appendChild(monthHeader);
                    monthDiv.appendChild(monthPanel);
                    entriesContainer.appendChild(monthDiv);
                });
        }

        function expandAll() {
            document.querySelectorAll('.panel').forEach(panel => {
                panel.style.display = 'block';
            });
        }

        function collapseAll() {
            document.querySelectorAll('.panel').forEach(panel => {
                panel.style.display = 'none';
            });
        }
    </script>
    <!-- Modal -->
    <div id="entryModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">X</button>
            <input type="date" id="entryDate" placeholder="Select a date">
            <textarea id="journalEntry" placeholder="Write your thoughts here..."></textarea>
            <div>
            <label for="sentiment">How are you feeling?</label>
            <div id="sentiment">
                <span onclick="setSentiment('üòä')" style="cursor: pointer;">üòä</span>
                <span onclick="setSentiment('üòê')" style="cursor: pointer;">üòê</span>
                <span onclick="setSentiment('üò¢')" style="cursor: pointer;">üò¢</span>
                <span onclick="setSentiment('üò°')" style="cursor: pointer;">üò°</span>
                <span onclick="setSentiment('üòÇ')" style="cursor: pointer;">üòÇ</span>
                <span onclick="setSentiment('üòç')" style="cursor: pointer;">üòç</span>
                <span onclick="setSentiment('üò¥')" style="cursor: pointer;">üò¥</span>
                <span onclick="setSentiment('ü§î')" style="cursor: pointer;">ü§î</span>
            </div>
            </div>
            <button onclick="saveEntry()">Save Entry</button>
        </div>
        <script>
            let selectedSentiment = '';

            function setSentiment(emoji) {
            selectedSentiment = emoji;
            alert(`You selected: ${emoji}`);
            }

            function saveEntry() {
            const entryText = document.getElementById('journalEntry').value;
            const entryDate = document.getElementById('entryDate').value;

            if (!entryText.trim()) {
                alert('Please write something before saving.');
                return;
            }

            if (!entryDate) {
                alert('Please select a date.');
                return;
            }

            if (!selectedSentiment) {
                alert('Please select your sentiment.');
                return;
            }

            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            entries.push({ text: entryText, date: entryDate, sentiment: selectedSentiment });
            localStorage.setItem('journalEntries', JSON.stringify(entries));

            document.getElementById('journalEntry').value = '';
            document.getElementById('entryDate').value = '';
            selectedSentiment = '';
            closeModal();
            displayEntries();
            }
        </script>
    </div>

    <script>
        function openModal() {
            document.getElementById('entryModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('entryModal').style.display = 'none';
        }

        function saveEntry() {
            const entryText = document.getElementById('journalEntry').value;
            if (!entryText.trim()) {
                alert('Please write something before saving.');
                return;
            }

            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            entries.push({ text: entryText, date: new Date().toLocaleString() });
            localStorage.setItem('journalEntries', JSON.stringify(entries));

            document.getElementById('journalEntry').value = '';
            closeModal();
            displayEntries();
        }

        function displayEntries() {
            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            const entriesContainer = document.getElementById('entries');
            entriesContainer.innerHTML = '';

            entries.forEach(entry => {
                const entryDiv = document.createElement('div');
                entryDiv.className = 'entry';
                entryDiv.innerHTML = `<strong>${entry.date}</strong><p>${entry.text}</p>`;
                entriesContainer.appendChild(entryDiv);
            });
        }

        // Display entries on page load
        displayEntries();
    </script>
</body>
</html>
